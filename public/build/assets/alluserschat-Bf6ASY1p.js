import{A as _,e as b,B as k,h as w,i as v,j as C}from"./AuthenticatedLayout-PWHvvRgb.js";import{d as B}from"./theme-bootstrap-C8fiAdlP.js";import{r,e as N,w as F,o as i,b as t,a as n,j as L,D as S,c,G as A,F as T,g as p,t as d,n as E}from"./app-Bshtgp-Q.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-C-oCVjLM.js";const U={components:{AuthenticatedLayout:_,BsPeopleFill:b,BsPersonFill:k,BsSearch:w,BsChatFill:v,BsSearchHeart:C},props:{users:{type:Array,required:!0},flash:{type:Object,default:()=>({})}},data(){return{search:"",userNotificationCounts:{}}},created(){var s;(s=this.$page.props)==null||s.notifications.forEach(e=>{const a=e.sender_id;this.userNotificationCounts[a]?this.userNotificationCounts[a]+=1:this.userNotificationCounts[a]=1}),console.log("User notification counts:",this.userNotificationCounts),window.Echo.private(`notifications.${this.$page.props.auth.user.id}`).listen("NotificationEvent",e=>{console.log("------------lololo",e);const a=e.sender_id;this.userNotificationCounts[a]?this.userNotificationCounts[a]+=1:this.userNotificationCounts[a]=1})},computed:{filteredUsers(){const s=this.search.toLowerCase();return this.users.filter(e=>e.name.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||e.role.toLowerCase().includes(s))}},watch:{"flash.success":function(s){this.showToast(s)}},mounted(){this.showToast(this.flash.success)},methods:{showToast(s){s&&B.useToast().success(s,{position:"top-right",duration:3e3})},startChat(s){this.$inertia.visit(`/chat/${s.id}`)}}},j={class:"container mx-auto px-6 py-8"},V={class:"rounded-lg shadow-md"},D={class:"p-6 border-b border-gray-200 dark:border-gray-700"},H={class:"flex items-center justify-between"},$={class:"flex items-center space-x-3"},I={class:"relative"},q={class:"p-6"},z={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},M={class:"divide-y divide-gray-200 dark:divide-gray-700"},O={class:"px-6 py-4 whitespace-nowrap"},R={class:"flex items-center space-x-3"},J={class:"p-2 rounded-full bg-blue-100 dark:bg-blue-900"},K={class:"text-gray-900 dark:text-gray-200"},Q={class:"px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y=["onClick"],Z={class:"whitespace-nowrap"},tt={key:0,class:"inline-flex items-center"},et={class:"px-2 py-1 text-xs font-bold rounded-full text-white dark:bg-blue-500"},st={key:0,class:"text-center py-12"};function ot(s,e,a,at,l,u){const h=r("BsPeopleFill"),x=r("BsSearch"),f=r("BsPersonFill"),g=r("BsChatFill"),y=r("BsSearchHeart"),m=r("AuthenticatedLayout");return i(),N(m,null,{default:F(()=>[t("div",j,[t("div",V,[t("div",D,[t("div",H,[t("div",$,[n(h,{class:"text-blue-600 text-2xl"}),e[1]||(e[1]=t("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200"},"All Users",-1))]),t("div",I,[L(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.search=o),type:"text",placeholder:"Search users...",class:"pl-10 pr-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[S,l.search]]),n(x,{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})])])]),t("div",q,[t("div",z,[t("table",G,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Name "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Email "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Role "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",M,[(i(!0),c(T,null,A(u.filteredUsers,o=>(i(),c("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[t("td",O,[t("div",R,[t("div",J,[n(f,{class:"text-blue-600 dark:text-blue-400"})]),t("span",K,d(o.name),1)])]),t("td",Q,d(o.email),1),t("td",W,[t("span",{class:E(["px-3 py-1 rounded-full text-sm font-medium",o.role==="admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300":"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300"])},d(o.role),3)]),t("td",X,[t("button",{onClick:rt=>u.startChat(o),class:"flex items-center space-x-2 px-4 py-2 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors"},[n(g,{class:"text-sm"}),e[2]||(e[2]=t("span",null,"Chat",-1))],8,Y)]),t("td",Z,[l.userNotificationCounts[o.id]?(i(),c("div",tt,[t("span",et,d(l.userNotificationCounts[o.id]),1)])):p("",!0)])]))),128))])])]),u.filteredUsers.length===0?(i(),c("div",st,[n(y,{class:"mx-auto h-12 w-12 text-gray-400"}),e[4]||(e[4]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-200"},"No users found",-1)),e[5]||(e[5]=t("p",{class:"mt-2 text-gray-500 dark:text-gray-400"}," Try adjusting your search terms to find what you're looking for. ",-1))])):p("",!0)])])])]),_:1})}const ut=P(U,[["render",ot]]);export{ut as default};
