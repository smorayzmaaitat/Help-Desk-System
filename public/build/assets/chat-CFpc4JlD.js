import{r as d,e as _,w as b,o as l,b as e,a as c,t as a,c as u,G as x,F as y,f,j as v,D as w,n as p}from"./app-Bshtgp-Q.js";import{A as k,B as M,a as B}from"./AuthenticatedLayout-PWHvvRgb.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-C-oCVjLM.js";const A={components:{AuthenticatedLayout:k,BsPersonFill:M,BsSend:B},props:{receiver:{type:Object,required:!0},messages:{type:Array,default:[]}},data(){return{newMessage:""}},methods:{sendMessage(){this.newMessage.trim()&&this.$inertia.post("/messages_send",{receiver_id:this.receiver.id,content:this.newMessage},{onSuccess:()=>{this.newMessage=""}})},formatTime(s){return new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},mounted(){window.Echo.private("chat").listen("MessageSent",s=>{console.log("--------------------<<<",s.sender_id),(s.sender_id===this.receiver.id&&s.receiver_id===this.$page.props.auth.user.id||s.sender_id===this.$page.props.auth.user.id&&s.receiver_id===this.receiver.id)&&this.$page.props.messages.push(s)})}},F={class:"container mx-auto px-6 py-8"},L={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md h-[800px] flex flex-col"},T={class:"p-6 border-b border-gray-200 dark:border-gray-700"},j={class:"flex items-center space-x-3"},C={class:"p-2 rounded-full bg-blue-100 dark:bg-blue-900"},D={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},P={class:"text-sm text-gray-500 dark:text-gray-400"},V={class:"flex-1 overflow-y-auto p-6 space-y-4",ref:"messageContainer"},E={class:"text-xs opacity-75 mt-1 block"},N={class:"p-6 border-t border-gray-200 dark:border-gray-700"},q=["disabled"];function z(s,r,o,G,i,n){const g=d("BsPersonFill"),m=d("BsSend"),h=d("AuthenticatedLayout");return l(),_(h,null,{default:b(()=>[e("div",F,[e("div",L,[e("div",T,[e("div",j,[e("div",C,[c(g,{class:"text-blue-600 dark:text-blue-400"})]),e("div",null,[e("h2",D,a(o.receiver.name),1),e("p",P,a(o.receiver.email),1)])])]),e("div",V,[(l(!0),u(y,null,x(o.messages,t=>(l(),u("div",{key:t.id,class:p(["flex",t.sender_id===s.$page.props.auth.user.id?"justify-end":"justify-start"])},[e("div",{class:p(["max-w-[70%] rounded-lg px-4 py-2",t.sender_id===s.$page.props.auth.user.id?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-200"])},[e("p",null,a(t.content),1),e("span",E,a(n.formatTime(t.created_at)),1)],2)],2))),128))],512),e("div",N,[e("form",{onSubmit:r[1]||(r[1]=f((...t)=>n.sendMessage&&n.sendMessage(...t),["prevent"])),class:"flex space-x-4"},[v(e("input",{"onUpdate:modelValue":r[0]||(r[0]=t=>i.newMessage=t),type:"text",placeholder:"Type your message...",class:"flex-1 px-4 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[w,i.newMessage]]),e("button",{type:"submit",class:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",disabled:!i.newMessage.trim()},[c(m),r[2]||(r[2]=e("span",null,"Send",-1))],8,q)],32)])])])]),_:1})}const I=S(A,[["render",z]]);export{I as default};
