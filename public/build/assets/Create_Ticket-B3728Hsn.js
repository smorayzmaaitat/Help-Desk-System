import{H as b,r as p,e as h,w as c,o as s,b as t,f as x,j as m,D as u,c as l,t as n,g as d,F as k,G as v,k as w,a as C,d as _}from"./app-Bshtgp-Q.js";import{A as F}from"./AuthenticatedLayout-PWHvvRgb.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-C-oCVjLM.js";const L={name:"CreateTicket",components:{AuthenticatedLayout:F},data(){return{form:{title:"",description:"",category:"",priority:"",department:"",attachment:null},allCategories:["Hardware","Software","Network","Other"],filteredCategories:[],errors:{}}},methods:{handleCategoryInput(){const i=this.form.category.toLowerCase();this.filteredCategories=this.allCategories.filter(e=>e.toLowerCase().includes(i))},validateForm(){return this.errors={},this.form.title||(this.errors.title="Title is required."),this.form.description||(this.errors.description="Description is required."),this.form.category||(this.errors.category="Category is required."),this.form.priority||(this.errors.priority="Priority is required."),this.form.department||(this.errors.department="Department is required."),Object.keys(this.errors).length===0},handleFileUpload(i){const e=i.target.files[0];e&&(e.type==="application/pdf"||e.type.startsWith("image/"))?this.form.attachment=e:(this.errors.attachment="Please upload a valid PDF or image file.",i.target.value="")},submitForm(){if(!this.validateForm()){console.log("Form validation failed:",this.errors);return}const i=new FormData;Object.keys(this.form).forEach(e=>{i.append(e,this.form[e])}),b.post("/tickets",i),console.log("Form submitted successfully:",i),this.form={title:"",description:"",category:"",priority:"",department:"",attachment:null}}}},V={class:"min-h-screen bg-gray-100"},T={class:"container mx-auto py-10"},U={class:"bg-white p-6 rounded-lg shadow-lg max-w-3xl mx-auto"},E={class:"mb-4"},N={key:0,class:"text-red-500 text-sm mt-1"},S={class:"mb-4"},q={key:0,class:"text-red-500 text-sm mt-1"},A={class:"mb-4 relative"},B={key:0,class:"text-red-500 text-sm mt-1"},I={key:1,class:"absolute bg-white border rounded-lg shadow-lg mt-1 w-full z-10"},M=["onClick"],P={class:"mb-4"},j={key:0,class:"text-red-500 text-sm mt-1"},H={class:"mb-4"},O={key:0,class:"text-red-500 text-sm mt-1"},z={class:"mb-4"},G={key:0,class:"text-red-500 text-sm mt-1"},W={class:"mt-6 text-center"};function J(i,e,K,Q,r,a){const f=p("Link"),g=p("AuthenticatedLayout");return s(),h(g,null,{default:c(()=>[t("div",V,[t("div",T,[t("div",U,[e[17]||(e[17]=t("h1",{class:"text-2xl font-bold mb-6 text-gray-800 text-center"}," Create a New Ticket ",-1)),t("form",{onSubmit:e[7]||(e[7]=x((...o)=>a.submitForm&&a.submitForm(...o),["prevent"]))},[t("div",E,[e[8]||(e[8]=t("label",{class:"block text-gray-700 font-medium mb-2",for:"title"},"Title",-1)),m(t("input",{type:"text",id:"title","onUpdate:modelValue":e[0]||(e[0]=o=>r.form.title=o),class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ticket title"},null,512),[[u,r.form.title]]),r.errors.title?(s(),l("p",N,n(r.errors.title),1)):d("",!0)]),t("div",S,[e[9]||(e[9]=t("label",{class:"block text-gray-700 font-medium mb-2",for:"description"},"Description",-1)),m(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>r.form.description=o),class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ticket description",rows:"4"},null,512),[[u,r.form.description]]),r.errors.description?(s(),l("p",q,n(r.errors.description),1)):d("",!0)]),t("div",A,[e[10]||(e[10]=t("label",{class:"block text-gray-700 font-medium mb-2",for:"category"},"Category",-1)),m(t("input",{type:"text",id:"category","onUpdate:modelValue":e[2]||(e[2]=o=>r.form.category=o),onInput:e[3]||(e[3]=(...o)=>a.handleCategoryInput&&a.handleCategoryInput(...o)),class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter or select a category"},null,544),[[u,r.form.category]]),r.errors.category?(s(),l("p",B,n(r.errors.category),1)):d("",!0),r.filteredCategories.length?(s(),l("ul",I,[(s(!0),l(k,null,v(r.filteredCategories,(o,y)=>(s(),l("li",{key:y,onClick:R=>{r.form.category=o,r.filteredCategories=[]},class:"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white"},n(o),9,M))),128))])):d("",!0)]),t("div",P,[e[12]||(e[12]=t("label",{class:"block text-gray-700 font-medium mb-2",for:"priority"},"Priority",-1)),m(t("select",{id:"priority","onUpdate:modelValue":e[4]||(e[4]=o=>r.form.priority=o),class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},e[11]||(e[11]=[t("option",{value:"",disabled:""},"Select priority",-1),t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1)]),512),[[w,r.form.priority]]),r.errors.priority?(s(),l("p",j,n(r.errors.priority),1)):d("",!0)]),t("div",H,[e[13]||(e[13]=t("label",{class:"block text-gray-700 font-medium mb-2",for:"department"},"Department",-1)),m(t("input",{type:"text",id:"department","onUpdate:modelValue":e[5]||(e[5]=o=>r.form.department=o),class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter department name"},null,512),[[u,r.form.department]]),r.errors.department?(s(),l("p",O,n(r.errors.department),1)):d("",!0)]),t("div",z,[e[14]||(e[14]=t("label",{class:"block text-gray-700 font-medium mb-2",for:"attachment"},"Attachment",-1)),t("input",{type:"file",id:"attachment",onChange:e[6]||(e[6]=(...o)=>a.handleFileUpload&&a.handleFileUpload(...o)),class:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,32),r.errors.attachment?(s(),l("p",G,n(r.errors.attachment),1)):d("",!0)]),e[15]||(e[15]=t("div",{class:"text-center"},[t("button",{type:"submit",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Submit Ticket ")],-1))],32),t("div",W,[C(f,{href:"/",class:"text-blue-500 hover:underline"},{default:c(()=>e[16]||(e[16]=[_(" Back to Dashboard ")])),_:1})])])])])]),_:1})}const ee=D(L,[["render",J]]);export{ee as default};
